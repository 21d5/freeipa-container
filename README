# IPA-enrolled client in Docker

This repository contains the Dockerfile and associated assets for
building a Docker image from the official yum repo which can then be
easily IPA-enrolled to FreeIPA server in another container.

To build the image, run in the root of the repository:

    docker build -t freeipa-client .

To run the client, link it to the freeipa-server container:

    docker run -h web.example.com --link freeipa-server-container:ipa -e PASSWORD=Secret123 -ti freeipa-client

or

    docker run --privileged --link freeipa-server-container:ipa -e PASSWORD=Secret123 -ti freeipa-client

Since IPA-enrollment requires fully-qualified hostname and by
default docker run does not set FQDN, either specify it with
the `-h` options or run the container as privileged when it will
be allowed to change its own hostname, using IPA server's domain.

The first time this container runs, it invokes `ipa-client-install`
with the given admin password and configures itself against
the FreeIPA server in the ipa-aliased container. The alias is set
with the `--link` option.  The referenced server container must be
running.

The `-ti` parameters are optional and are used for get a terminal
(useful for experimenting in the container).

The container can the be stopped and started:

    docker stop <the-container-id>
    docker start -ai <the-container-id>

# FreeIPA server in Docker

Checkout the `fedora-20`, `fedora-rawhide`, or `rhel-7` branch,
to get repository with the Dockerfile and associated assets for
building a FreeIPA/IdM server Docker image from the official yum
repo.

# Automated builds

From fedora-* branches in https://github.com/adelton/docker-freeipa,
images are automatically built into https://hub.docker.com/u/adelton/.

# Copyright 2014--2015 Jan Pazdziora

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
